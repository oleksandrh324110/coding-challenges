import{p as l}from"./p5.min-2d0f902e.js";const r=20,o=Math.floor(window.innerHeight/r),h=Math.floor(window.innerWidth/r),a=r-2,f=r-2,y="#f00",w="#0f0";class d{constructor(){this.x=s.floor(s.random(h)),this.y=s.floor(s.random(o))}show(){s.fill(y),s.rect(this.x*r,this.y*r,a,a)}}class u{init(){s.keyPressed=()=>{const t=this.keyCodeToKey(s.keyCode);if(t){if(e.isStarted||(e.start(),this.key=t),t==="r")return e.restart();if(t==="w"&&this.pressedKey==="s"||t==="a"&&this.pressedKey==="d"||t==="s"&&this.pressedKey==="w"||t==="d"&&this.pressedKey==="a")return;this.key=t}}}keyCodeToKey(t){if(t===87||t===38)return"w";if(t===65||t===37)return"a";if(t===83||t===40)return"s";if(t===68||t===39)return"d";if(t===82)return"r"}}const n=new u;class x{constructor(){this.x=s.floor(s.random(h)),this.y=s.floor(s.random(o)),this.tail=[]}update(){if(n.key==="w"?this.direction={x:0,y:-1}:n.key==="a"?this.direction={x:-1,y:0}:n.key==="s"?this.direction={x:0,y:1}:n.key==="d"&&(this.direction={x:1,y:0}),this.tail.unshift({x:this.x,y:this.y}),this.tail.pop(),this.x+=this.direction.x,this.y+=this.direction.y,this.x<0||this.x>h||this.y<0||this.y>o)return e.restart();for(let t=3;t<this.tail.length;t++)if(this.x===this.tail[t].x&&this.y===this.tail[t].y)return e.restart()}canEat(t){return this.x===t.x&&this.y===t.y}grow(){this.tail.push({x:this.x,y:this.y})}show(){s.fill(w),[{x:this.x,y:this.y},...this.tail].forEach(({x:t,y:c})=>s.rect(t*r,c*r,f,f))}}class k{constructor(){this.isStarted=!1}init(){this.snake=new x,this.food=new d}start(){this.isStarted=!0}restart(){this.isStarted=!1,this.init()}update(){this.isStarted&&(this.snake.update(),this.snake.canEat(this.food)&&(this.snake.grow(),this.food=new d),n.pressedKey=n.key)}show(){this.food.show(),this.snake.show()}}const e=new k,p=i=>{i.setup=()=>{i.createCanvas(window.innerWidth,window.innerHeight),i.frameRate(15),i.noStroke(),e.init(),n.init()},i.draw=()=>{i.background(255),e.update(),e.show()}},s=new l(p);
